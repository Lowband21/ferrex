{
  "db_name": "PostgreSQL",
  "query": "\n            INSERT INTO auth_device_sessions (\n                id,\n                user_id,\n                device_fingerprint,\n                device_name,\n                status,\n                pin_hash,\n                failed_attempts,\n                first_authenticated_by,\n                first_authenticated_at,\n                last_seen_at,\n                last_activity,\n                created_at\n            ) VALUES (\n                $1,\n                $2,\n                $3,\n                $4,\n                ($5)::text::auth_device_status,\n                $6,\n                $7,\n                $2,\n                $8,\n                $9,\n                $10,\n                $11\n            )\n            ON CONFLICT (id) DO UPDATE SET\n                device_name = EXCLUDED.device_name,\n                status = EXCLUDED.status,\n                pin_hash = EXCLUDED.pin_hash,\n                failed_attempts = EXCLUDED.failed_attempts,\n                last_seen_at = EXCLUDED.last_seen_at,\n                last_activity = EXCLUDED.last_activity,\n                updated_at = NOW(),\n                revoked_at = CASE\n                    WHEN EXCLUDED.status = 'revoked'::auth_device_status THEN\n                        COALESCE(auth_device_sessions.revoked_at, NOW())\n                    ELSE NULL\n                END,\n                revoked_by = CASE\n                    WHEN EXCLUDED.status = 'revoked'::auth_device_status THEN auth_device_sessions.revoked_by\n                    ELSE NULL\n                END,\n                revoked_reason = CASE\n                    WHEN EXCLUDED.status = 'revoked'::auth_device_status THEN auth_device_sessions.revoked_reason\n                    ELSE NULL\n                END\n            ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Uuid",
        "Uuid",
        "Text",
        "Text",
        "Text",
        "Text",
        "Int2",
        "Timestamptz",
        "Timestamptz",
        "Timestamptz",
        "Timestamptz"
      ]
    },
    "nullable": []
  },
  "hash": "2aa57ea2da9e79039eb44d9ac79c9c2a9b689bac764ac86961965d630f1a0c2e"
}
