{
  "db_name": "PostgreSQL",
  "query": "\n            WITH completed AS (\n                SELECT media_uuid, media_type, completed_at\n                FROM user_completed_media\n                WHERE user_id = $1\n            )\n            SELECT * FROM (\n                SELECT\n                    mr.id AS \"id!\",\n                    completed.completed_at::bigint AS \"last_watched!\",\n                    0::int4                  AS \"media_kind!\"\n                FROM completed\n                JOIN movie_references mr ON completed.media_uuid = mr.id AND completed.media_type = 0\n\n                UNION ALL\n\n                SELECT\n                    er.id              AS \"id!\",\n                    completed.completed_at::bigint AS \"last_watched!\",\n                    3::int4                  AS \"media_kind!\"\n                FROM completed\n                JOIN episode_references er ON completed.media_uuid = er.id AND completed.media_type = 3\n            ) AS completed_rows\n            ORDER BY completed_rows.\"last_watched!\" DESC\n            LIMIT $2 OFFSET $3\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id!",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "last_watched!",
        "type_info": "Int8"
      },
      {
        "ordinal": 2,
        "name": "media_kind!",
        "type_info": "Int4"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Int8",
        "Int8"
      ]
    },
    "nullable": [
      null,
      null,
      null
    ]
  },
  "hash": "fa45d7b62b079ecdb71607e6bcd157481e4a5ec7e5990b185073fd99be8079c0"
}
