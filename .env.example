######################
# Ferrex Server .env #
######################

# --- Core services ---
# The init wizard (`just init-config`) will generate strong passwords and update these values.
POSTGRES_USER=postgres
POSTGRES_PASSWORD=REPLACE_ME
FERREX_DB=ferrex
FERREX_APP_USER=ferrex_app
FERREX_APP_PASSWORD=REPLACE_ME
DATABASE_URL=<REDACTED>
REDIS_URL=redis://cache:6379

# --- Server runtime ---
SERVER_HOST=0.0.0.0
SERVER_PORT=3000

# Media root inside the container (compose maps ./media -> /media)
MEDIA_ROOT=/media

# Logging (optional)
# RUST_LOG=info,scan::summary=info,scan::queue=info,scan::seed=info

# --- Authentication secrets ---
# Replace with long, random values
# AUTH_PASSWORD_PEPPER=REPLACE_WITH_LONG_RANDOM_VALUE
# AUTH_TOKEN_KEY=REPLACE_WITH_LONG_RANDOM_VALUE
# Optional setup gating
# FERREX_SETUP_TOKEN=REPLACE_WITH_ONE_TIME_TOKEN

# --- Online metadata ---
# TMDB API key for metadata lookups (optional)
# TMDB_API_KEY=your_tmdb_api_key_here

# --- HTTPS / Proxy ---
# If terminating TLS at the app:
# TLS_CERT_PATH=/certs/cert.pem
# TLS_KEY_PATH=/certs/key.pem
# Enforce HTTPS (behind reverse proxy or tailnet)
# ENFORCE_HTTPS=true
# TRUST_PROXY_HEADERS=true

# --- Rate limiter (optional, requires REDIS_URL) ---
# RATE_LIMITS_PATH=config/rate-limits.toml
# or
# RATE_LIMITS_JSON={"login":{"limit":5,"period":"1m"}}
