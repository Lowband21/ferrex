# Run `just config` or `just start` to populate `.env` based on this template
# User-configurable values
# Prompted for during configuration

# NO DEFAULTS
# Absolute path to your media library on the host
MEDIA_ROOT=
# TMDB API key (required for metadata; leave blank to disable)
TMDB_API_KEY=

## DEFAULTS USED IF NOT OVERRIDDEN
# Public URL clients use to reach this server
FERREX_SERVER_URL=http://localhost:3000
# Server bind (host + port)
SERVER_HOST=0.0.0.0
SERVER_PORT=3000
# Cache locations
CACHE_DIR=./cache
TRANSCODE_CACHE_DIR=./cache/transcode
THUMBNAIL_CACHE_DIR=./cache/thumbnails
# SQLx offline metadata cache (keep enabled for local workflows)
SQLX_OFFLINE=true
# Demo config
FERREX_DEMO_ROOT=./demo
DEMO_DATABASE_NAME=ferrex_demo
FERREX_DEMO_LANGUAGE=en
FERREX_DEMO_REGION=US

# TMDB Config
TMDB_LANG=en-US
TMDB_REGION=US

## OPTIONAL
# HTTPS / TLS
#ENFORCE_HTTPS=false
#TRUST_PROXY_HEADERS=false
#TLS_CERT_PATH=/path/to/cert.pem
#TLS_KEY_PATH=/path/to/key.pem

# Auto-generated and managed values
# (don't manually change unless you know what you're doing)

# Redis config
REDIS_URL=redis://127.0.0.1:6379
REDIS_URL_CONTAINER=redis://cache:6379

# Database connection config
DATABASE_HOST=localhost
DATABASE_HOST_CONTAINER=db
DATABASE_PORT=5432
DATABASE_NAME=ferrex

# Credentials
DATABASE_ADMIN_USER=postgres
DATABASE_ADMIN_PASSWORD=changeme_admin
DATABASE_APP_USER=ferrex_app
DATABASE_APP_PASSWORD=changeme_app

# Convenience connection strings
DATABASE_URL=postgresql://ferrex_app:changeme_app@localhost:5432/ferrex
DATABASE_URL_ADMIN=postgresql://postgres:changeme_admin@localhost:5432/ferrex
DATABASE_URL_CONTAINER=postgresql://ferrex_app:changeme_app@db:5432/ferrex

# Postgres specific config
POSTGRES_INITDB_ARGS="--auth-host=scram-sha-256 --auth-local=scram-sha-256"

# Auth secrets
AUTH_PASSWORD_PEPPER=changeme_pepper
AUTH_TOKEN_KEY=changeme_token
FERREX_SETUP_TOKEN=changeme_setup

# CORS / HTTPS (still defaults unless you enable advanced config)
CORS_ALLOWED_ORIGINS=http://localhost:5173,https://localhost:5173,http://localhost:3000,https://localhost:3000
CORS_ALLOW_CREDENTIALS=false
HSTS_MAX_AGE=0
HSTS_INCLUDE_SUBDOMAINS=false
HSTS_PRELOAD=false
