# Simpler development environment
FROM rust:1.90.0-slim-trixie

# Install only essential dependencies
RUN apt-get update && apt-get install -y --no-install-recommends \
    ffmpeg \
    libavcodec-dev \
    libavformat-dev \
    libavutil-dev \
    pkg-config \
    clang \
    && rm -rf /var/lib/apt/lists/*

# Set up working directory
WORKDIR /app

# Expose server port
EXPOSE 3000

# Default command
CMD ["cargo", "run", "-p", "ferrex-server"]
